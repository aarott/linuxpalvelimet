# h5 Nimittäin  

AMD Ryzen 2600X Six-Core Processor 3.6 ghz  

16gb RAM  

Windows 10 64-bit käyttöjärjestelmä  

## x)  


https://terokarvinen.com/2016/02/16/new-default-website-with-apache2-show-your-homepage-at-top-of-example-com-no-tilde/  

Artikkelissa kerrotaan miten asennetaan Apache2, vaihdetaan default kotisivu toiseksi ja miten luodaan uusi virtual host.  

- apache2 asennus $ sudo apt-get update ;  $ sudo apt-get -y install apache 2
- valittavissa olevat mutta ei välttämättä aktiiviset sivustot löytyy /etc/apache2/sites/available missä jokainen virtuaalinen hosti on tekstitiedostona (esimerkki.conf)
- enabled sites eli toimivat sivustot löytyy /etc/apache2/sites/enabled 
- uuden virtuaalihostin luonti:  
  $ sudoedit /etc/apache2/sites-available/esimerkki.conf

<VirtualHost *:80>  
 DocumentRoot /home/esimerkki/public_html/  
 <Directory /home/esimerkki/public_html/>  
   Require all granted  
 </Directory>  
</VirtualHost>  

Huom. Tiedostossa kaikki '##' on kommentteja.  

- sivujen päälle/pois kytkentä:  
  $ sudo a2ensite esimerkki.conf  
  $ sudo a2dissite 000-default.conf    
  $ sudo systemctl apache2 restart  

- uuden kotisivun tekeminen polkuun /home/esimerkki/public_html ja tehdään sinne index.html tiedosto
- apache2 error logeja voi katsoa esim $ sudo tail -1 /var/log/apache2/error.log  

https://terokarvinen.com/2018/04/10/name-based-virtual-hosts-on-apache-multiple-websites-to-single-ip-address/

- Luodaan uusi conf tiedosto  
   $ sudoedit /etc/apache2/sites-available/pyora.example.com.conf  
  $ cat /etc/apache2/sites-available/pyora.example.com.conf
    
<VirtualHost *:80>  
 ServerName pyora.example.com  
 ServerAlias www.pyora.example.com  
 DocumentRoot /home/xubuntu/publicsites/pyora.example.com  
 <Directory /home/xubuntu/publicsites/pyora.example.com>  
   Require all granted  
 </Directory>  
</VirtualHost>  

$ sudo a2ensite pyora.example.com  
$ sudo systemctl restart apache2

- luodaan uusi weppi-sivu normaalina käyttäjänä:

$ mkdir -p /home/xubuntu/publicsites/pyora.example.com/  
$ echo pyora > /home/xubuntu/publicsites/pyora.example.com/index.html
 
- jos halutaan testata tätä paikallisesti voidaan muokata /etc/hosts kansiota:

$ sudoedit /etc/hosts  
$ cat /etc/hosts  
127.0.0.1 localhost  
127.0.1.1 xubuntu  
127.0.0.1 pyora.example.com  


https://httpd.apache.org/docs/2.4/vhosts/name-based.html  

Artikkelissa kerrotaan miten Name-Based Virtuaalinen hostaus tapahtuu.  

- Sen sijaan että jokaiselle sivustolle otettaisiin yhteyttä eri IP-osoitteella, voidaan Name-based hostauksella osoittaa useampi osoite yhdelle IP-osoitteelle
- Jokainen host-name voidaan konfiguroida DNS:llä osoittamaan IP osoitetta, jonka jälkeen Apache HTTP serveri valitsee oikean hostnamen

  ![image](https://github.com/aarott/linuxpalvelimet/assets/78908566/7e38f4ae-1dfb-4c2b-864c-c8d433164cc4)


  ## a) Vuokraa domain-nimi ja aseta se osoittamaan virtuaalipalvelimeesi


Olin aiemmin hankkinut Git-Hub Education paketin millä saa NameCheap palvelusta .me tunnuksella ilmaisen domain nimen.  

https://education.github.com/pack/offers

https://nc.me/  --> tuolta sivulta saa etsittyä vapaan .me loppuisen domainin

Huom. Ensiksi piti mennä Githubiin ja avata sivusto GitHub Student Developer Pack. Sieltä löytyy NameCheap palvelun linkki mikä aktivoi ilmaisen kokeilun.  

![image](https://github.com/aarott/linuxpalvelimet/assets/78908566/b8ae7c76-7599-48ab-9835-1090d5363554)

Näkymä NameCheap sivustolla näyttää tältä kun domain on rekisteröity. Manage nappulaa klikkaamalla pääsee  muuttamaan asetuksia.

![image](https://github.com/aarott/linuxpalvelimet/assets/78908566/109cff50-3fec-40ac-8935-12dc8d9f134a)

Klikkasin Advanced DNS ja kävin muuttamassa A recordin oman virtuaalipalvelimeni IP-osoitteeseen.  
Valitsin TTL 1min että se päivittyisi mahdollisimman nopeesti.  
Hetken päästä tarkistin waytofind.me ja siellä tosiaan löytyy sivusto minkä olin aiemmin tehnyt palvelimeni esimerkkisivuksi.  



![image](https://github.com/aarott/linuxpalvelimet/assets/78908566/0e65a817-1da4-492c-83a3-3e184c7ff676)


![image](https://github.com/aarott/linuxpalvelimet/assets/78908566/a35e3fb6-82c8-4590-8f7b-258eebfafda5)  








 

